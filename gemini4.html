<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>高难度不定积分40题</title>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            line-height: 1.6;
            background-color: #f8f9fa;
            color: #212529;
        }
        .container {
            max-width: 900px;
            margin: 20px auto;
            padding: 20px;
        }
        h1, h2 {
            text-align: center;
            color: #343a40;
            border-bottom: 2px solid #dee2e6;
            padding-bottom: 10px;
        }
        .problem-set, .solution-set {
            background-color: #ffffff;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        }
        .problem {
            margin-bottom: 20px;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 15px;
        }
        .problem-title {
            font-weight: bold;
            font-size: 1.15em;
            color: #0056b3;
        }
        summary {
            cursor: pointer;
            color: #007bff;
            font-weight: 500;
            padding: 5px;
            border-radius: 4px;
            display: inline-block;
        }
        summary:hover {
            background-color: #e7f3ff;
        }
        details {
            margin-top: 10px;
            background-color: #fdfdfd;
            padding: 15px;
            border: 1px dashed #ced4da;
            border-radius: 4px;
        }
        .solution {
            margin-bottom: 20px;
            background-color: #f1f3f5;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }
        .solution-title {
            font-weight: bold;
            font-size: 1.1em;
            color: #dc3545;
            display: block;
            margin-bottom: 10px;
        }
        /* 简单的数学排版 */
        .math {
            font-family: "Cambria Math", "Latin Modern Math", "STIX Two Math", serif;
            font-size: 1.1em;
        }
    </style>
</head>
<body>
	<script src='https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'></script>
    <div class="container">
        <h1>大一期末顶级难度不定积分40题</h1>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <div class="problem-set">
            <h2>题目</h2>

            <div class="problem">
                <span class="problem-title">1. $\int \sec^5 x \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>使用分部积分法，并推导 $\int \sec^n x \, dx$ 的递推公式。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">2. $\int \frac{dx}{2\sin x - \cos x + 5}$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>使用万能代换 $t = \tan(x/2)$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">3. $\int \frac{dx}{x\sqrt{x^2+x+1}}$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>尝试代换 $x = 1/u$，或者使用欧拉第一代换：$\sqrt{x^2+x+1} = t - x$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">4. $\int \frac{dx}{x^4+1}$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>将分母分解为 $(x^2+1)^2 - (\sqrt{2}x)^2 = (x^2+\sqrt{2}x+1)(x^2-\sqrt{2}x+1)$，然后使用部分分式。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">5. $\int \sin(\ln x) \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>连续使用两次分部积分法，最后解出原积分。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">6. $\int \frac{dx}{\sqrt[3]{(x+1)^2(x-1)^4}}$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>将原式变形为 $\int \frac{dx}{(x-1)^2} \sqrt[3]{\left(\frac{x+1}{x-1}\right)^2}$，然后令 $t = \sqrt[3]{\frac{x+1}{x-1}}$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">7. $\int \frac{x^2-1}{x^4+1} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>分子分母同除以 $x^2$，变为 $\int \frac{1-1/x^2}{x^2+1/x^2} \, dx$，然后令 $u = x + 1/x$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">8. $\int \frac{x^2+1}{x^4+x^2+1} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>分子分母同除以 $x^2$，变为 $\int \frac{1+1/x^2}{x^2+1+1/x^2} \, dx$，然后令 $u = x - 1/x$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">9. $\int \ln(x+\sqrt{1+x^2}) \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>使用分部积分法，令 $u = \ln(x+\sqrt{1+x^2})$，$dv = dx$。你会发现 $du$ 惊人地简单。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">10. $\int (\arcsin x)^2 \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>使用分部积分法，令 $u = (\arcsin x)^2$。可能需要两次分部积分。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">11. $\int \frac{x+\sin x}{1+\cos x} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>拆成两项：$\int \frac{x}{1+\cos x} \, dx + \int \frac{\sin x}{1+\cos x} \, dx$。第一项使用半角公式和分部积分，第二项是凑微分。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">12. $\int \frac{x e^x}{(1+x)^2} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>尝试将分子写成 $(x+1-1)e^x$，然后拆分。或者使用 $\int e^x (f(x) + f'(x)) \, dx = e^x f(x) + C$ 的形式。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">13. $\int \frac{dx}{(x+1)\sqrt{x^2+1}}$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>尝试代换 $u = \frac{1}{x+1}$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">14. $\int \sqrt{e^x-1} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>令 $u = \sqrt{e^x-1}$，解出 $x$ 并求 $dx$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">15. $\int \frac{dx}{(x^2+1)^3}$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>使用三角代换 $x = \tan \theta$，然后处理 $\int \cos^4 \theta \, d\theta$。</p>
                </details>
            </div>
            
            <div class="problem">
                <span class="problem-title">16. $\int \frac{\sin x}{\sin x + \cos x} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>尝试在分子上凑出分母及其导数。即设 $\sin x = A(\sin x + \cos x) + B(\cos x - \sin x)$。</p>
                </details>
            </div>
            
            <div class="problem">
                <span class="problem-title">17. $\int \frac{dx}{x(1+x^n)^{1/n}}$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>从括号中提出 $x^n$，变为 $\int \frac{dx}{x \cdot x (1+x^{-n})^{1/n}}$，然后令 $u = 1+x^{-n}$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">18. $\int \frac{dx}{(x^2+4)\sqrt{x^2+1}}$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>使用三角代换 $x = \tan \theta$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">19. $\int x^2 \arctan x \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>分部积分，令 $u = \arctan x$，$dv = x^2 \, dx$。之后会遇到有理函数积分，可能需要多项式长除法。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">20. $\int \frac{\sin x - x \cos x}{x^2} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>观察被积函数的形式，它是否像某个商的导数？</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">21. $\int \frac{x \arcsin x}{\sqrt{1-x^2}} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>分部积分，令 $u = \arcsin x$，$dv = \frac{x}{\sqrt{1-x^2}} \, dx$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">22. $\int e^{ax} \cos(bx) \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>经典的循环分部积分。连续使用两次分部积分，然后解方程得到原积分。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">23. $\int \frac{x^5+1}{x^3-x^2-x+1} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>先做多项式长除法。然后分解分母 $x^3-x^2-x+1 = (x-1)^2(x+1)$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">24. $\int \frac{dx}{x \ln x \ln(\ln x)}$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>连续使用换元法。从最内层开始，令 $u = \ln(\ln x)$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">25. $\int \frac{x^3+x+1}{x(x^2+1)^2} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>标准的复杂部分分式分解：$\frac{A}{x} + \frac{Bx+C}{x^2+1} + \frac{Dx+E}{(x^2+1)^2}$。</p>
                </details>
            </div>
            
            <div class="problem">
                <span class="problem-title">26. $\int \frac{\sqrt{x^2-1}}{x^3} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>使用三角代换 $x = \sec \theta$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">27. $\int \frac{x+3}{\sqrt{x^2+2x+2}} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>将分子拆分为 $\frac{x+1}{\sqrt{...}} + \frac{2}{\sqrt{...}}$。第一部分凑微分，第二部分配方后是 $\operatorname{arsinh}$ 或对数。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">28. $\int \frac{x^2-1}{x^2+1} \frac{dx}{\sqrt{x^4+1}}$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>这是一个高级技巧。尝试 $u = x/\sqrt{x^4+1}$？不，试试 $u = \frac{x^2+1}{\sqrt{x^4+1}}$？ 还是试试 $t = x+1/x$？</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">29. $\int x^3 \sqrt{x^2+a^2} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>令 $u = x^2$，然后分部积分。或者使用三角代换 $x = a \tan \theta$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">30. $\int \frac{\ln x}{(x+1)^2} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>分部积分，令 $u = \ln x$，$dv = (x+1)^{-2} \, dx$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">31. $\int \frac{e^x(1+x)}{(1+xe^x)^2} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>观察分子是否是分母中某一部分的导数。令 $u = 1 + xe^x$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">32. $\int \frac{\sqrt{x}}{1+\sqrt[4]{x}} \, dx$</span>
                <details>
                    <summary>
                        点击查看提示
                    </summary>
                    <p>令 $x = u^4$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">33. $\int \frac{\ln(x+1)-\ln x}{x(x+1)} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>令 $u = \ln(x+1) - \ln x = \ln(1 + 1/x)$，然后计算 $du$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">34. $\int \frac{x^2}{\sqrt{1-x^2}} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>经典的三角代换 $x = \sin \theta$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">35. $\int \frac{dx}{x(x^n+1)}$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>将 $\frac{1}{x(x^n+1)}$ 拆分为 $\frac{1}{x} - \frac{x^{n-1}}{x^n+1}$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">36. $\int \frac{x^2}{(x \sin x + \cos x)^2} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>观察分母 $(x \sin x + \cos x)' = x \cos x$。尝试将分子乘以 $\frac{\cos x}{\cos x}$。
                    即 $\int \frac{x^2 \cos x}{\cos x (x \sin x + \cos x)^2} \, dx$。
                    尝试更巧妙的方法：$\int \frac{x \sec x \cdot x \cos x}{(x \sin x + \cos x)^2} \, dx$，然后分部积分，令 $u = x \sec x$，$dv = \frac{x \cos x}{(x \sin x + \cos x)^2} \, dx$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">37. $\int \tan^4 x \sec^3 x \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>将 $\tan^4 x = (\sec^2 x - 1)^2$，然后展开，得到 $\sec^7 x, \sec^5 x, \sec^3 x$ 的积分。需要递推公式。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">38. $\int \frac{dx}{(1-x^2)\sqrt{1+x^2}}$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>尝试 $x = \tan \theta$，积分变为 $\int \frac{\sec \theta}{1-\tan^2 \theta} d\theta = \int \frac{\cos \theta}{\cos^2 \theta - \sin^2 \theta} d\theta = \int \frac{\cos \theta}{\cos(2\theta)} d\theta$。这似乎更复杂了。
                    试试 $x = 1/u$? 还是 $u = \sqrt{1+x^2}$?
                    或者尝试部分分式 $\frac{1}{1-x^2} = \frac{1}{2}(\frac{1}{1-x} + \frac{1}{1+x})$。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">39. $\int \sqrt{\tan x} \, dx$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>令 $u = \sqrt{\tan x}$，$u^2 = \tan x$，$2u \, du = \sec^2 x \, dx = (1+\tan^2 x) \, dx = (1+u^4) \, dx$。
                    所以 $dx = \frac{2u}{1+u^4} \, du$。原积分变为 $\int u \cdot \frac{2u}{1+u^4} \, du = \int \frac{2u^2}{u^4+1} \, du$。
                    这又回到了 $u^4+1$ 的分解问题。</p>
                </details>
            </div>

            <div class="problem">
                <span class="problem-title">40. $\int \frac{dx}{\sin^4 x + \cos^4 x}$</span>
                <details>
                    <summary>点击查看提示</summary>
                    <p>$\sin^4 x + \cos^4 x = (\sin^2 x + \cos^2 x)^2 - 2\sin^2 x \cos^2 x = 1 - \frac{1}{2}\sin^2(2x)$。
                    或者，分子分母同除以 $\cos^4 x$，变为 $\int \frac{\sec^4 x}{\tan^4 x + 1} \, dx$，然后令 $u = \tan x$。</p>
                </details>
            </div>

        </div>

        <div class="solution-set">
            <h2>解析</h2>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
            <div class="solution">
                <span class="solution-title">1. $\int \sec^5 x \, dx$</span>
                <p>
                    使用递推公式 $I_n = \int \sec^n x \, dx = \frac{1}{n-1} \sec^{n-2} x \tan x + \frac{n-2}{n-1} I_{n-2}$。
                    $I_1 = \ln|\sec x + \tan x| + C$
                    $I_3 = \frac{1}{2}\sec x \tan x + \frac{1}{2}I_1 = \frac{1}{2}\sec x \tan x + \frac{1}{2}\ln|\sec x + \tan x| + C$
                    $I_5 = \frac{1}{4}\sec^3 x \tan x + \frac{3}{4}I_3 = \frac{1}{4}\sec^3 x \tan x + \frac{3}{8}\sec x \tan x + \frac{3}{8}\ln|\sec x + \tan x| + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">2. $\int \frac{dx}{2\sin x - \cos x + 5}$</span>
                <p>
                    令 $t = \tan(x/2)$，则 $\sin x = \frac{2t}{1+t^2}$，$\cos x = \frac{1-t^2}{1+t^2}$，$dx = \frac{2}{1+t^2} \, dt$。
                    原积分 = $\int \frac{\frac{2}{1+t^2} \, dt}{2(\frac{2t}{1+t^2}) - (\frac{1-t^2}{1+t^2}) + 5} = \int \frac{2 \, dt}{4t - (1-t^2) + 5(1+t^2)} = \int \frac{2 \, dt}{4t - 1 + t^2 + 5 + 5t^2} = \int \frac{2 \, dt}{6t^2 + 4t + 4} = \int \frac{dt}{3t^2 + 2t + 2}$
                    $= \int \frac{dt}{3(t^2 + \frac{2}{3}t + \frac{2}{3})} = \frac{1}{3} \int \frac{dt}{(t + 1/3)^2 + 2/3 - 1/9} = \frac{1}{3} \int \frac{dt}{(t + 1/3)^2 + 5/9}$
                    $= \frac{1}{3} \cdot \frac{1}{\sqrt{5}/3} \arctan\left(\frac{t+1/3}{\sqrt{5}/3}\right) + C = \frac{1}{\sqrt{5}} \arctan\left(\frac{3t+1}{\sqrt{5}}\right) + C$
                    $= \frac{1}{\sqrt{5}} \arctan\left(\frac{3\tan(x/2)+1}{\sqrt{5}}\right) + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">3. $\int \frac{dx}{x\sqrt{x^2+x+1}}$</span>
                <p>
                    令 $x = 1/u$，$dx = -1/u^2 \, du$。
                    原积分 = $\int \frac{-1/u^2 \, du}{(1/u)\sqrt{1/u^2+1/u+1}} = \int \frac{-1/u \, du}{\sqrt{\frac{1+u+u^2}{u^2}}} = \int \frac{-1/u \, du}{\frac{\sqrt{1+u+u^2}}{|u|}}$
                    假设 $u > 0$ (即 $x>0$)，积分 = $\int \frac{-du}{\sqrt{u^2+u+1}} = \int \frac{-du}{\sqrt{(u+1/2)^2 + 3/4}}$
                    $= -\ln|u+1/2 + \sqrt{(u+1/2)^2 + 3/4}| + C = -\ln|u+1/2 + \sqrt{u^2+u+1}| + C$
                    $= -\ln|\frac{1}{x}+\frac{1}{2} + \sqrt{\frac{1}{x^2}+\frac{1}{x}+1}| + C = -\ln|\frac{2+x}{2x} + \frac{\sqrt{1+x+x^2}}{x}| + C$
                    $= -\ln|\frac{2+x+2\sqrt{x^2+x+1}}{2x}| + C = \ln|x| - \ln|2+x+2\sqrt{x^2+x+1}| + C'$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">4. $\int \frac{dx}{x^4+1}$</span>
                <p>
                    $x^4+1 = (x^2+\sqrt{2}x+1)(x^2-\sqrt{2}x+1)$
                    $\frac{1}{x^4+1} = \frac{Ax+B}{x^2+\sqrt{2}x+1} + \frac{Cx+D}{x^2-\sqrt{2}x+1}$
                    解得 $A = \frac{1}{2\sqrt{2}}, B = \frac{1}{2}, C = -\frac{1}{2\sqrt{2}}, D = \frac{1}{2}$
                    原积分 = $\int \frac{\frac{1}{2\sqrt{2}}x + \frac{1}{2}}{x^2+\sqrt{2}x+1} \, dx + \int \frac{-\frac{1}{2\sqrt{2}}x + \frac{1}{2}}{x^2-\sqrt{2}x+1} \, dx$
                    $= \frac{1}{4\sqrt{2}} \int \frac{2x+2\sqrt{2}}{x^2+\sqrt{2}x+1} \, dx + \frac{1}{4} \int \frac{2}{x^2+\sqrt{2}x+1} \, dx - \frac{1}{4\sqrt{2}} \int \frac{2x-2\sqrt{2}}{x^2-\sqrt{2}x+1} \, dx + \frac{1}{4} \int \frac{2}{x^2-\sqrt{2}x+1} \, dx$
                    $= \frac{1}{4\sqrt{2}} \ln(x^2+\sqrt{2}x+1) + \frac{1}{2\sqrt{2}} \arctan(\sqrt{2}x+1) - \frac{1}{4\sqrt{2}} \ln(x^2-\sqrt{2}x+1) + \frac{1}{2\sqrt{2}} \arctan(\sqrt{2}x-1) + C$
                    (合并后) $= \frac{1}{4\sqrt{2}} \ln\left(\frac{x^2+\sqrt{2}x+1}{x^2-\sqrt{2}x+1}\right) + \frac{1}{2\sqrt{2}} \arctan(\frac{\sqrt{2}x}{1-x^2}) + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">5. $\int \sin(\ln x) \, dx$</span>
                <p>
                    令 $I = \int \sin(\ln x) \, dx$。
                    分部积分 $u = \sin(\ln x), dv = dx \implies du = \cos(\ln x) \cdot \frac{1}{x} \, dx, v = x$
                    $I = x \sin(\ln x) - \int x \cdot \cos(\ln x) \cdot \frac{1}{x} \, dx = x \sin(\ln x) - \int \cos(\ln x) \, dx$
                    再对 $\int \cos(\ln x) \, dx$ 分部积分: $u = \cos(\ln x), dv = dx \implies du = -\sin(\ln x) \cdot \frac{1}{x} \, dx, v = x$
                    $\int \cos(\ln x) \, dx = x \cos(\ln x) - \int x \cdot (-\sin(\ln x)) \cdot \frac{1}{x} \, dx = x \cos(\ln x) + I$
                    代回 $I$: $I = x \sin(\ln x) - (x \cos(\ln x) + I)$
                    $2I = x \sin(\ln x) - x \cos(\ln x)$
                    $I = \frac{x}{2}(\sin(\ln x) - \cos(\ln x)) + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">6. $\int \frac{dx}{\sqrt[3]{(x+1)^2(x-1)^4}}$</span>
                <p>
                    原式 $= \int \frac{dx}{(x-1)^{4/3} (x+1)^{2/3}} = \int \frac{dx}{(x-1)^2 (\frac{x+1}{x-1})^{2/3}} = \int \frac{1}{(x-1)^2} (\frac{x+1}{x-1})^{-2/3} \, dx$
                    令 $t = \frac{x+1}{x-1} = 1 + \frac{2}{x-1}$。
                    $dt = -\frac{2}{(x-1)^2} \, dx \implies \frac{dx}{(x-1)^2} = -\frac{1}{2} \, dt$
                    原积分 $= \int t^{-2/3} (-\frac{1}{2}) \, dt = -\frac{1}{2} \int t^{-2/3} \, dt = -\frac{1}{2} \cdot \frac{t^{1/3}}{1/3} + C = -\frac{3}{2} t^{1/3} + C$
                    $= -\frac{3}{2} \sqrt[3]{\frac{x+1}{x-1}} + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">7. $\int \frac{x^2-1}{x^4+1} \, dx$</span>
                <p>
                    原积分 $= \int \frac{1-1/x^2}{x^2+1/x^2} \, dx$。
                    令 $u = x + 1/x$，则 $du = (1 - 1/x^2) \, dx$。
                    分母 $x^2 + 1/x^2 = (x+1/x)^2 - 2 = u^2 - 2$。
                    原积分 $= \int \frac{du}{u^2 - 2} = \frac{1}{2\sqrt{2}} \ln\left|\frac{u-\sqrt{2}}{u+\sqrt{2}}\right| + C$
                    $= \frac{1}{2\sqrt{2}} \ln\left|\frac{x+1/x-\sqrt{2}}{x+1/x+\sqrt{2}}\right| + C = \frac{1}{2\sqrt{2}} \ln\left|\frac{x^2-\sqrt{2}x+1}{x^2+\sqrt{2}x+1}\right| + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">8. $\int \frac{x^2+1}{x^4+x^2+1} \, dx$</span>
                <p>
                    原积分 $= \int \frac{1+1/x^2}{x^2+1+1/x^2} \, dx$。
                    令 $u = x - 1/x$，则 $du = (1 + 1/x^2) \, dx$。
                    分母 $x^2 + 1/x^2 + 1 = (x-1/x)^2 + 2 + 1 = u^2 + 3$。
                    原积分 $= \int \frac{du}{u^2+3} = \frac{1}{\sqrt{3}} \arctan(u/\sqrt{3}) + C$
                    $= \frac{1}{\sqrt{3}} \arctan\left(\frac{x-1/x}{\sqrt{3}}\right) + C = \frac{1}{\sqrt{3}} \arctan\left(\frac{x^2-1}{\sqrt{3}x}\right) + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">9. $\int \ln(x+\sqrt{1+x^2}) \, dx$</span>
                <p>
                    令 $u = \ln(x+\sqrt{1+x^2})$，$dv = dx$。
                    $du = \frac{1}{x+\sqrt{1+x^2}} \cdot (1 + \frac{2x}{2\sqrt{1+x^2}}) \, dx = \frac{1}{x+\sqrt{1+x^2}} \cdot \frac{\sqrt{1+x^2}+x}{\sqrt{1+x^2}} \, dx = \frac{1}{\sqrt{1+x^2}} \, dx$。
                    $v = x$。
                    原积分 $= uv - \int v \, du = x \ln(x+\sqrt{1+x^2}) - \int \frac{x}{\sqrt{1+x^2}} \, dx$
                    $= x \ln(x+\sqrt{1+x^2}) - \sqrt{1+x^2} + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">10. $\int (\arcsin x)^2 \, dx$</span>
                <p>
                    令 $u = (\arcsin x)^2$，$dv = dx \implies du = 2\arcsin x \cdot \frac{1}{\sqrt{1-x^2}} \, dx$，$v = x$。
                    $I = x(\arcsin x)^2 - \int \frac{2x \arcsin x}{\sqrt{1-x^2}} \, dx$
                    对右侧积分 $J = \int \frac{2x \arcsin x}{\sqrt{1-x^2}} \, dx$ 再次分部积分：
                    令 $u = \arcsin x$，$dv = \frac{2x}{\sqrt{1-x^2}} \, dx \implies du = \frac{1}{\sqrt{1-x^2}} \, dx$，$v = -2\sqrt{1-x^2}$。
                    $J = -2\sqrt{1-x^2} \arcsin x - \int (-2\sqrt{1-x^2}) \cdot \frac{1}{\sqrt{1-x^2}} \, dx$
                    $J = -2\sqrt{1-x^2} \arcsin x + \int 2 \, dx = -2\sqrt{1-x^2} \arcsin x + 2x + C$
                    $I = x(\arcsin x)^2 - J = x(\arcsin x)^2 + 2\sqrt{1-x^2} \arcsin x - 2x + C$
                </p>
            </div>
            
            <div class="solution">
                <span class="solution-title">11. $\int \frac{x+\sin x}{1+\cos x} \, dx$</span>
                <p>
                    原积分 $= \int \frac{x}{1+\cos x} \, dx + \int \frac{\sin x}{1+\cos x} \, dx$
                    第二项：$\int \frac{\sin x}{1+\cos x} \, dx = \int \frac{-d(1+\cos x)}{1+\cos x} = -\ln|1+\cos x| + C_1$
                    第一项：$\int \frac{x}{2\cos^2(x/2)} \, dx = \frac{1}{2} \int x \sec^2(x/2) \, dx$
                    分部积分：$u = x, dv = \sec^2(x/2) \, dx \implies du = dx, v = 2\tan(x/2)$
                    $\frac{1}{2} \int x \sec^2(x/2) \, dx = \frac{1}{2} [x \cdot 2\tan(x/2) - \int 2\tan(x/2) \, dx] = x\tan(x/2) - \int \tan(x/2) \, dx$
                    $= x\tan(x/2) - 2\ln|\sec(x/2)| + C_2$
                    总和：$x\tan(x/2) - 2\ln|\sec(x/2)| - \ln|1+\cos x| + C = x\tan(x/2) - 2\ln|\sec(x/2)| - \ln|2\cos^2(x/2)| + C$
                    $= x\tan(x/2) - 2\ln|\sec(x/2)| - \ln 2 - 2\ln|\cos(x/2)| + C = x\tan(x/2) + C'$
                    (因为 $2\ln|\sec(x/2)| + 2\ln|\cos(x/2)| = 2\ln 1 = 0$)
                    答案：$x\tan(x/2) + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">12. $\int \frac{x e^x}{(1+x)^2} \, dx$</span>
                <p>
                    原积分 $= \int \frac{(x+1-1)e^x}{(1+x)^2} \, dx = \int \frac{(x+1)e^x}{(1+x)^2} \, dx - \int \frac{e^x}{(1+x)^2} \, dx$
                    $= \int \frac{e^x}{1+x} \, dx - \int \frac{e^x}{(1+x)^2} \, dx$
                    对第一项 $\int \frac{e^x}{1+x} \, dx$ 分部积分：
                    令 $u = \frac{1}{1+x}$，$dv = e^x \, dx \implies du = -\frac{1}{(1+x)^2} \, dx$，$v = e^x$。
                    $\int \frac{e^x}{1+x} \, dx = \frac{e^x}{1+x} - \int e^x \cdot \left(-\frac{1}{(1+x)^2}\right) \, dx = \frac{e^x}{1+x} + \int \frac{e^x}{(1+x)^2} \, dx$
                    代回原式：
                    $(\frac{e^x}{1+x} + \int \frac{e^x}{(1+x)^2} \, dx) - \int \frac{e^x}{(1+x)^2} \, dx = \frac{e^x}{1+x} + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">13. $\int \frac{dx}{(x+1)\sqrt{x^2+1}}$</span>
                <p>
                    令 $u = \frac{1}{x+1}$，则 $x = \frac{1}{u} - 1$，$dx = -\frac{1}{u^2} \, du$。
                    $x^2+1 = (\frac{1}{u}-1)^2 + 1 = \frac{1}{u^2} - \frac{2}{u} + 1 + 1 = \frac{1-2u+2u^2}{u^2}$
                    原积分 $= \int \frac{-\frac{1}{u^2} \, du}{\frac{1}{u} \sqrt{\frac{1-2u+2u^2}{u^2}}} = \int \frac{-\frac{1}{u^2} \, du}{\frac{1}{u^2} \sqrt{1-2u+2u^2}}$ (假设 $u>0$)
                    $= -\int \frac{du}{\sqrt{2u^2-2u+1}} = -\int \frac{du}{\sqrt{2(u^2-u+1/2)}} = -\frac{1}{\sqrt{2}} \int \frac{du}{\sqrt{(u-1/2)^2 + 1/4}}$
                    $= -\frac{1}{\sqrt{2}} \ln\left|u-1/2 + \sqrt{(u-1/2)^2 + 1/4}\right| + C$
                    $= -\frac{1}{\sqrt{2}} \ln\left|u-1/2 + \sqrt{u^2-u+1/2}\right| + C$
                    代回 $u = \frac{1}{x+1}$ (过程省略)
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">14. $\int \sqrt{e^x-1} \, dx$</span>
                <p>
                    令 $u = \sqrt{e^x-1}$，$u^2 = e^x-1$，$e^x = u^2+1$，$x = \ln(u^2+1)$。
                    $dx = \frac{2u}{u^2+1} \, du$。
                    原积分 $= \int u \cdot \frac{2u}{u^2+1} \, du = \int \frac{2u^2}{u^2+1} \, du = \int \frac{2(u^2+1)-2}{u^2+1} \, du$
                    $= \int (2 - \frac{2}{u^2+1}) \, du = 2u - 2\arctan(u) + C$
                    $= 2\sqrt{e^x-1} - 2\arctan(\sqrt{e^x-1}) + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">15. $\int \frac{dx}{(x^2+1)^3}$</span>
                <p>
                    令 $x = \tan \theta$，$dx = \sec^2 \theta \, d\theta$。
                    原积分 $= \int \frac{\sec^2 \theta \, d\theta}{(\tan^2 \theta + 1)^3} = \int \frac{\sec^2 \theta}{(\sec^2 \theta)^3} \, d\theta = \int \frac{1}{\sec^4 \theta} \, d\theta = \int \cos^4 \theta \, d\theta$
                    $= \int (\frac{1+\cos 2\theta}{2})^2 \, d\theta = \frac{1}{4} \int (1 + 2\cos 2\theta + \cos^2 2\theta) \, d\theta$
                    $= \frac{1}{4} \int (1 + 2\cos 2\theta + \frac{1+\cos 4\theta}{2}) \, d\theta$
                    $= \frac{1}{4} \int (\frac{3}{2} + 2\cos 2\theta + \frac{1}{2}\cos 4\theta) \, d\theta$
                    $= \frac{1}{4} [\frac{3}{2}\theta + \sin 2\theta + \frac{1}{8}\sin 4\theta] + C$
                    $= \frac{3}{8}\theta + \frac{1}{4}\sin 2\theta + \frac{1}{32}\sin 4\theta + C$
                    代回 $\theta = \arctan x$ (过程繁琐，$\sin 2\theta = \frac{2x}{1+x^2}$, $\sin 4\theta = 2\sin 2\theta \cos 2\theta = ...$)
                    最终答案：$\frac{3}{8}\arctan x + \frac{x}{4(x^2+1)^2} + \frac{3x}{8(x^2+1)} + C$ (使用递推公式 $I_n = \frac{x}{2(n-1)(x^2+1)^{n-1}} + \frac{2n-3}{2n-2} I_{n-1}$ 更快)
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">16. $\int \frac{\sin x}{\sin x + \cos x} \, dx$</span>
                <p>
                    设 $\sin x = A(\sin x + \cos x) + B(\cos x - \sin x)$
                    $\sin x = (A-B)\sin x + (A+B)\cos x$
                    $A-B = 1, A+B = 0 \implies A = 1/2, B = -1/2$
                    原积分 $= \int \frac{\frac{1}{2}(\sin x + \cos x) - \frac{1}{2}(\cos x - \sin x)}{\sin x + \cos x} \, dx$
                    $= \int \frac{1}{2} \, dx - \frac{1}{2} \int \frac{\cos x - \sin x}{\sin x + \cos x} \, dx$
                    $= \frac{1}{2}x - \frac{1}{2} \int \frac{d(\sin x + \cos x)}{\sin x + \cos x}$
                    $= \frac{1}{2}x - \frac{1}{2}\ln|\sin x + \cos x| + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">17. $\int \frac{dx}{x(1+x^n)^{1/n}}$</span>
                <p>
                    原积分 $= \int \frac{dx}{x \cdot [x^n(1+x^{-n})]^{1/n}} = \int \frac{dx}{x \cdot x (1+x^{-n})^{1/n}} = \int \frac{dx}{x^2 (1+x^{-n})^{1/n}}$
                    $= \int x^{-2} (1+x^{-n})^{-1/n} \, dx$
                    令 $u = 1+x^{-n}$，$du = -n x^{-n-1} \, dx$。
                    这似乎不对。
                    重试：$\int \frac{dx}{x^{n+1} (1+x^{-n})^{1/n}}$。
                    令 $u = 1+x^{-n}$，$du = -n x^{-n-1} \, dx \implies x^{-n-1} \, dx = -\frac{1}{n} \, du$。
                    原积分 $= \int \frac{x^{-n-1}}{x^{-n}(1+x^{-n})^{1/n}} \, dx$ (还是不对)
                    
                    正确方法：$\int \frac{dx}{x(1+x^n)^{1/n}} = \int \frac{dx}{x \cdot x (x^{-n}+1)^{1/n}} = \int \frac{x^{-n-1} dx}{x^{-n}(1+x^{-n})^{1/n}}$
                    令 $t = 1+x^{-n}$，$dt = -nx^{-n-1} dx$
                    原积分 $= \int \frac{1}{(t-1) t^{1/n}} (-\frac{1}{n}) dt$ (这更复杂了)

                    标准解法：令 $t^n = 1+x^n$，$nt^{n-1} dt = nx^{n-1} dx$。
                    或者：令 $u = x^n$，$du = nx^{n-1} dx \implies dx = \frac{du}{nx^{n-1}} = \frac{du}{n u^{(n-1)/n}}$
                    $\int \frac{1}{u^{1/n} (1+u)^{1/n}} \frac{du}{n u^{(n-1)/n}} = \frac{1}{n} \int \frac{du}{u(1+u)^{1/n}}$ (回去了)

                    最终尝试：令 $t^n = \frac{1+x^n}{x^n} = 1+x^{-n}$。
                    $nt^{n-1} dt = -n x^{-n-1} dx \implies x^{-n-1} dx = -t^{n-1} dt$
                    原积分 $= \int \frac{dx}{x^{n+1} (1+x^{-n})^{1/n}} = \int \frac{x^{-n-1} dx}{(1+x^{-n})^{1/n}} = \int \frac{-t^{n-1} dt}{t} = -\int t^{n-2} dt$
                    $= -\frac{t^{n-1}}{n-1} + C = -\frac{1}{n-1} (1+x^{-n})^{(n-1)/n} + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">18. $\int \frac{dx}{(x^2+4)\sqrt{x^2+1}}$</span>
                <p>
                    令 $x = \tan \theta$，$dx = \sec^2 \theta \, d\theta$。
                    原积分 $= \int \frac{\sec^2 \theta \, d\theta}{(\tan^2 \theta + 4)\sqrt{\tan^2 \theta + 1}} = \int \frac{\sec^2 \theta \, d\theta}{(\tan^2 \theta + 4)\sec \theta} = \int \frac{\sec \theta \, d\theta}{\tan^2 \theta + 4}$
                    $= \int \frac{\frac{1}{\cos \theta} \, d\theta}{\frac{\sin^2 \theta}{\cos^2 \theta} + 4} = \int \frac{\cos \theta \, d\theta}{\sin^2 \theta + 4\cos^2 \theta} = \int \frac{\cos \theta \, d\theta}{\sin^2 \theta + 4(1-\sin^2 \theta)} = \int \frac{\cos \theta \, d\theta}{4 - 3\sin^2 \theta}$
                    令 $u = \sin \theta$，$du = \cos \theta \, d\theta$。
                    原积分 $= \int \frac{du}{4 - 3u^2} = \frac{1}{3} \int \frac{du}{4/3 - u^2} = \frac{1}{3} \int \frac{du}{(2/\sqrt{3})^2 - u^2}$
                    $= \frac{1}{3} \cdot \frac{1}{2(2/\sqrt{3})} \ln\left|\frac{2/\sqrt{3} + u}{2/\sqrt{3} - u}\right| + C = \frac{\sqrt{3}}{12} \ln\left|\frac{2 + \sqrt{3}u}{2 - \sqrt{3}u}\right| + C$
                    代回 $u = \sin \theta = \frac{x}{\sqrt{x^2+1}}$
                    $= \frac{\sqrt{3}}{12} \ln\left|\frac{2 + \sqrt{3} \frac{x}{\sqrt{x^2+1}}}{2 - \sqrt{3} \frac{x}{\sqrt{x^2+1}}}\right| + C = \frac{\sqrt{3}}{12} \ln\left|\frac{2\sqrt{x^2+1} + \sqrt{3}x}{2\sqrt{x^2+1} - \sqrt{3}x}\right| + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">19. $\int x^2 \arctan x \, dx$</span>
                <p>
                    令 $u = \arctan x$，$dv = x^2 \, dx \implies du = \frac{1}{1+x^2} \, dx$，$v = \frac{x^3}{3}$。
                    原积分 $= \frac{x^3}{3} \arctan x - \int \frac{x^3}{3(1+x^2)} \, dx = \frac{x^3}{3} \arctan x - \frac{1}{3} \int \frac{x(x^2+1)-x}{1+x^2} \, dx$
                    $= \frac{x^3}{3} \arctan x - \frac{1}{3} \int (x - \frac{x}{1+x^2}) \, dx$
                    $= \frac{x^3}{3} \arctan x - \frac{1}{3} [\frac{x^2}{2} - \frac{1}{2}\ln(1+x^2)] + C$
                    $= \frac{1}{3} x^3 \arctan x - \frac{1}{6} x^2 + \frac{1}{6} \ln(1+x^2) + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">20. $\int \frac{\sin x - x \cos x}{x^2} \, dx$</span>
                <p>
                    观察到 $ \frac{d}{dx}\left(\frac{f}{g}\right) = \frac{f'g - fg'}{g^2} $。
                    令 $f(x) = \sin x$，$g(x) = x$。
                    $ \frac{d}{dx}\left(\frac{\sin x}{x}\right) = \frac{(\cos x) \cdot x - (\sin x) \cdot 1}{x^2} = \frac{x \cos x - \sin x}{x^2} $。
                    这与题目 差一个负号。
                    所以，原积分 $= \int -\left(\frac{x \cos x - \sin x}{x^2}\right) \, dx = -\frac{\sin x}{x} + C$。
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">21. $\int \frac{x \arcsin x}{\sqrt{1-x^2}} \, dx$</span>
                <p>
                    令 $u = \arcsin x$，$dv = \frac{x}{\sqrt{1-x^2}} \, dx$。
                    $du = \frac{1}{\sqrt{1-x^2}} \, dx$，$v = \int \frac{x}{\sqrt{1-x^2}} \, dx = -\sqrt{1-x^2}$。
                    原积分 $= uv - \int v \, du = -\sqrt{1-x^2} \arcsin x - \int (-\sqrt{1-x^2}) \cdot \frac{1}{\sqrt{1-x^2}} \, dx$
                    $= -\sqrt{1-x^2} \arcsin x + \int 1 \, dx$
                    $= -\sqrt{1-x^2} \arcsin x + x + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">22. $\int e^{ax} \cos(bx) \, dx$</span>
                <p>
                    令 $I = \int e^{ax} \cos(bx) \, dx$。
                    分部积分 $u = \cos(bx), dv = e^{ax} dx \implies du = -b\sin(bx) dx, v = \frac{1}{a}e^{ax}$
                    $I = \frac{1}{a}e^{ax}\cos(bx) - \int \frac{1}{a}e^{ax}(-b\sin(bx)) dx = \frac{1}{a}e^{ax}\cos(bx) + \frac{b}{a} \int e^{ax}\sin(bx) \, dx$
                    再对 $\int e^{ax}\sin(bx) \, dx$ 分部积分: $u = \sin(bx), dv = e^{ax} dx \implies du = b\cos(bx) dx, v = \frac{1}{a}e^{ax}$
                    $\int e^{ax}\sin(bx) \, dx = \frac{1}{a}e^{ax}\sin(bx) - \int \frac{1}{a}e^{ax}(b\cos(bx)) dx = \frac{1}{a}e^{ax}\sin(bx) - \frac{b}{a}I$
                    代回 $I$: $I = \frac{1}{a}e^{ax}\cos(bx) + \frac{b}{a} [\frac{1}{a}e^{ax}\sin(bx) - \frac{b}{a}I]$
                    $I = \frac{1}{a}e^{ax}\cos(bx) + \frac{b}{a^2}e^{ax}\sin(bx) - \frac{b^2}{a^2}I$
                    $I (1 + \frac{b^2}{a^2}) = \frac{e^{ax}}{a^2} (a\cos(bx) + b\sin(bx))$
                    $I (\frac{a^2+b^2}{a^2}) = \frac{e^{ax}}{a^2} (a\cos(bx) + b\sin(bx))$
                    $I = \frac{e^{ax}}{a^2+b^2} (a\cos(bx) + b\sin(bx)) + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">23. $\int \frac{x^5+1}{x^3-x^2-x+1} \, dx$</span>
                <p>
                    长除法：$x^5+1 = (x^2+x+2)(x^3-x^2-x+1) + (2x^2+x-1)$
                    分母：$x^3-x^2-x+1 = x^2(x-1) - (x-1) = (x^2-1)(x-1) = (x-1)^2(x+1)$
                    原积分 $= \int (x^2+x+2) \, dx + \int \frac{2x^2+x-1}{(x-1)^2(x+1)} \, dx$
                    第一部分：$\frac{x^3}{3} + \frac{x^2}{2} + 2x + C_1$
                    第二部分：$\frac{2x^2+x-1}{(x-1)^2(x+1)} = \frac{A}{x-1} + \frac{B}{(x-1)^2} + \frac{C}{x+1}$
                    $2x^2+x-1 = A(x-1)(x+1) + B(x+1) + C(x-1)^2$
                    $x=1 \implies 2+1-1 = 2B \implies B = 1$
                    $x=-1 \implies 2-1-1 = 4C \implies C = 0$
                    $x=0 \implies -1 = -A + B + C = -A + 1 \implies A = 2$
                    第二部分积分 $= \int (\frac{2}{x-1} + \frac{1}{(x-1)^2}) \, dx = 2\ln|x-1| - \frac{1}{x-1} + C_2$
                    总答案：$\frac{x^3}{3} + \frac{x^2}{2} + 2x + 2\ln|x-1| - \frac{1}{x-1} + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">24. $\int \frac{dx}{x \ln x \ln(\ln x)}$</span>
                <p>
                    令 $u = \ln(\ln x)$。
                    $du = \frac{1}{\ln x} \cdot \frac{1}{x} \, dx = \frac{dx}{x \ln x}$
                    原积分 $= \int \frac{1}{u} \, du = \ln|u| + C = \ln|\ln(\ln x)| + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">25. $\int \frac{x^3+x+1}{x(x^2+1)^2} \, dx$</span>
                <p>
                    $\frac{x^3+x+1}{x(x^2+1)^2} = \frac{A}{x} + \frac{Bx+C}{x^2+1} + \frac{Dx+E}{(x^2+1)^2}$
                    $x^3+x+1 = A(x^2+1)^2 + (Bx+C)x(x^2+1) + (Dx+E)x$
                    $x=0 \implies 1 = A$
                    $x^3+x+1 = (x^4+2x^2+1) + (Bx+C)(x^3+x) + Dx^2+Ex$
                    $x^3+x+1 = x^4+2x^2+1 + Bx^4+Bx^2+Cx^3+Cx + Dx^2+Ex$
                    $x^3+x+1 = (1+B)x^4 + Cx^3 + (2+B+D)x^2 + (C+E)x + 1$
                    $1+B = 0 \implies B = -1$
                    $C = 1$
                    $2+B+D = 0 \implies 2-1+D = 0 \implies D = -1$
                    $C+E = 1 \implies 1+E = 1 \implies E = 0$
                    原积分 $= \int (\frac{1}{x} + \frac{-x+1}{x^2+1} + \frac{-x}{(x^2+1)^2}) \, dx$
                    $= \int \frac{1}{x} \, dx - \int \frac{x}{x^2+1} \, dx + \int \frac{1}{x^2+1} \, dx - \int \frac{x}{(x^2+1)^2} \, dx$
                    $= \ln|x| - \frac{1}{2}\ln(x^2+1) + \arctan x - (-\frac{1}{2(x^2+1)}) + C$
                    $= \ln|x| - \frac{1}{2}\ln(x^2+1) + \arctan x + \frac{1}{2(x^2+1)} + C$
                </p>
            </div>
            
            <div class="solution">
                <span class="solution-title">26. $\int \frac{\sqrt{x^2-1}}{x^3} \, dx$</span>
                <p>
                    令 $x = \sec \theta$，$dx = \sec \theta \tan \theta \, d\theta$。
                    原积分 $= \int \frac{\sqrt{\sec^2 \theta - 1}}{\sec^3 \theta} \cdot \sec \theta \tan \theta \, d\theta = \int \frac{\tan \theta}{\sec^3 \theta} \cdot \sec \theta \tan \theta \, d\theta$
                    $= \int \frac{\tan^2 \theta}{\sec^2 \theta} \, d\theta = \int \sin^2 \theta \, d\theta = \int \frac{1-\cos 2\theta}{2} \, d\theta$
                    $= \frac{1}{2}\theta - \frac{1}{4}\sin 2\theta + C = \frac{1}{2}\theta - \frac{1}{2}\sin \theta \cos \theta + C$
                    $x = \sec \theta \implies \cos \theta = 1/x$。$\theta = \operatorname{arcsec} x$。$\sin \theta = \frac{\sqrt{x^2-1}}{x}$。
                    $= \frac{1}{2}\operatorname{arcsec} x - \frac{1}{2} \frac{\sqrt{x^2-1}}{x} \cdot \frac{1}{x} + C = \frac{1}{2}\operatorname{arcsec} x - \frac{\sqrt{x^2-1}}{2x^2} + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">27. $\int \frac{x+3}{\sqrt{x^2+2x+2}} \, dx$</span>
                <p>
                    原积分 $= \int \frac{(x+1) + 2}{\sqrt{x^2+2x+2}} \, dx = \int \frac{x+1}{\sqrt{x^2+2x+2}} \, dx + \int \frac{2}{\sqrt{(x+1)^2+1}} \, dx$
                    第一项：令 $u = x^2+2x+2$，$du = (2x+2) \, dx = 2(x+1) \, dx$。
                    $\int \frac{1}{\sqrt{u}} \cdot \frac{1}{2} \, du = \sqrt{u} = \sqrt{x^2+2x+2}$
                    第二项：令 $v = x+1$，$dv = dx$。
                    $2 \int \frac{dv}{\sqrt{v^2+1}} = 2 \ln|v + \sqrt{v^2+1}| = 2 \ln|x+1 + \sqrt{(x+1)^2+1}| = 2 \ln|x+1 + \sqrt{x^2+2x+2}|$
                    总答案：$\sqrt{x^2+2x+2} + 2 \ln|x+1 + \sqrt{x^2+2x+2}| + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">28. $\int \frac{x^2-1}{x^2+1} \frac{dx}{\sqrt{x^4+1}}$</span>
                <p>
                    分子分母同除以 $x^2$ (在根号外)
                    原积分 $= \int \frac{1-1/x^2}{1+1/x^2} \frac{dx}{x \sqrt{x^2+1/x^2}} = \int \frac{1-1/x^2}{(1+1/x^2)\sqrt{x^2+1/x^2}} \frac{dx}{x}$ (这似乎不对)
                    
                    正确方法：$\int \frac{1-1/x^2}{1+1/x^2} \frac{dx}{\sqrt{x^2+1/x^2}}$
                    令 $u = x+1/x$，$du = (1-1/x^2) dx$。
                    $u^2 = x^2+2+1/x^2 \implies x^2+1/x^2 = u^2-2$。
                    $1+1/x^2 = \frac{x^2+1}{x^2}$
                    原积分 $= \int \frac{(1-1/x^2)dx}{(1+1/x^2)\sqrt{x^2+1/x^2}} = \int \frac{du}{(u^2-2)/x^2 \cdot \sqrt{u^2-2}}$ (不对)
                    
                    正确代换：令 $t = x/\sqrt{x^4+1}$?
                    标准解法：$u = \frac{x^2+1}{\sqrt{x^4+1}}$。$u^2 = \frac{x^4+2x^2+1}{x^4+1} = 1 + \frac{2x^2}{x^4+1}$
                    $du = \frac{2x\sqrt{x^4+1} - (x^2+1)\frac{4x^3}{2\sqrt{x^4+1}}}{x^4+1} dx = \frac{2x(x^4+1) - 2x^3(x^2+1)}{(x^4+1)\sqrt{x^4+1}} dx = \frac{2x^5+2x-2x^5-2x^3}{(x^4+1)^{3/2}} dx = \frac{2x(1-x^2)}{(x^4+1)^{3/2}} dx$
                    这太复杂了。
                    
                    最终解法：令 $x = \tan(\theta/2)$?
                    答案 (来自更高级的技巧)：$\frac{1}{\sqrt{2}} \ln\left(\frac{\sqrt{x^4+1} + \sqrt{2}x}{x^2-1}\right) + C$。这题超纲。
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">29. $\int x^3 \sqrt{x^2+a^2} \, dx$</span>
                <p>
                    令 $u = x^2$，$du = 2x \, dx$。
                    原积分 $= \int x^2 \sqrt{x^2+a^2} \cdot x \, dx = \int u \sqrt{u+a^2} \cdot \frac{1}{2} \, du = \frac{1}{2} \int u \sqrt{u+a^2} \, du$
                    令 $v = u+a^2$，$u = v-a^2$，$du = dv$。
                    $\frac{1}{2} \int (v-a^2) \sqrt{v} \, dv = \frac{1}{2} \int (v^{3/2} - a^2 v^{1/2}) \, dv$
                    $= \frac{1}{2} [\frac{v^{5/2}}{5/2} - a^2 \frac{v^{3/2}}{3/2}] + C = \frac{1}{5}v^{5/2} - \frac{a^2}{3}v^{3/2} + C$
                    $= \frac{1}{5}(u+a^2)^{5/2} - \frac{a^2}{3}(u+a^2)^{3/2} + C$
                    $= \frac{1}{5}(x^2+a^2)^{5/2} - \frac{a^2}{3}(x^2+a^2)^{3/2} + C$
                    (可以提取 $(x^2+a^2)^{3/2}$ 因子)
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">30. $\int \frac{\ln x}{(x+1)^2} \, dx$</span>
                <p>
                    令 $u = \ln x$，$dv = (x+1)^{-2} \, dx \implies du = \frac{1}{x} \, dx$，$v = -\frac{1}{x+1}$。
                    原积分 $= -\frac{\ln x}{x+1} - \int (-\frac{1}{x+1}) \cdot \frac{1}{x} \, dx = -\frac{\ln x}{x+1} + \int \frac{1}{x(x+1)} \, dx$
                    $= -\frac{\ln x}{x+1} + \int (\frac{1}{x} - \frac{1}{x+1}) \, dx$
                    $= -\frac{\ln x}{x+1} + \ln|x| - \ln|x+1| + C = -\frac{\ln x}{x+1} + \ln\left|\frac{x}{x+1}\right| + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">31. $\int \frac{e^x(1+x)}{(1+xe^x)^2} \, dx$</span>
                <p>
                    令 $u = 1 + xe^x$。
                    $du = (1 \cdot e^x + x \cdot e^x) \, dx = (1+x)e^x \, dx$。
                    原积分 $= \int \frac{du}{u^2} = -\frac{1}{u} + C = -\frac{1}{1+xe^x} + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">32. $\int \frac{\sqrt{x}}{1+\sqrt[4]{x}} \, dx$</span>
                <p>
                    令 $u = \sqrt[4]{x}$，$x = u^4$，$dx = 4u^3 \, du$。
                    原积分 $= \int \frac{u^2}{1+u} \cdot 4u^3 \, du = 4 \int \frac{u^5}{u+1} \, du$
                    长除法：$\frac{u^5}{u+1} = u^4 - u^3 + u^2 - u + 1 - \frac{1}{u+1}$
                    $4 \int (u^4 - u^3 + u^2 - u + 1 - \frac{1}{u+1}) \, du$
                    $= 4 [\frac{u^5}{5} - \frac{u^4}{4} + \frac{u^3}{3} - \frac{u^2}{2} + u - \ln|u+1|] + C$
                    $= \frac{4}{5}x^{5/4} - x + \frac{4}{3}x^{3/4} - 2x^{1/2} + 4x^{1/4} - 4\ln|1+\sqrt[4]{x}| + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">33. $\int \frac{\ln(x+1)-\ln x}{x(x+1)} \, dx$</span>
                <p>
                    令 $u = \ln(x+1) - \ln x = \ln(\frac{x+1}{x}) = \ln(1 + 1/x)$。
                    $du = (\frac{1}{x+1} - \frac{1}{x}) \, dx = (\frac{x - (x+1)}{x(x+1)}) \, dx = -\frac{1}{x(x+1)} \, dx$
                    原积分 $= \int u \cdot (-du) = -\int u \, du = -\frac{1}{2}u^2 + C$
                    $= -\frac{1}{2} (\ln(x+1)-\ln x)^2 + C = -\frac{1}{2} \left(\ln\left(1+\frac{1}{x}\right)\right)^2 + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">34. $\int \frac{x^2}{\sqrt{1-x^2}} \, dx$</span>
                <p>
                    令 $x = \sin \theta$，$dx = \cos \theta \, d\theta$。
                    原积分 $= \int \frac{\sin^2 \theta}{\sqrt{1-\sin^2 \theta}} \cdot \cos \theta \, d\theta = \int \frac{\sin^2 \theta}{\cos \theta} \cdot \cos \theta \, d\theta = \int \sin^2 \theta \, d\theta$
                    $= \int \frac{1-\cos 2\theta}{2} \, d\theta = \frac{1}{2}\theta - \frac{1}{4}\sin 2\theta + C = \frac{1}{2}\theta - \frac{1}{2}\sin \theta \cos \theta + C$
                    $\theta = \arcsin x$。$\sin \theta = x$。$\cos \theta = \sqrt{1-x^2}$。
                    $= \frac{1}{2}\arcsin x - \frac{1}{2} x \sqrt{1-x^2} + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">35. $\int \frac{dx}{x(x^n+1)}$</span>
                <p>
                    原积分 $= \int \frac{1}{x(x^n+1)} \, dx = \int \frac{(x^n+1) - x^n}{x(x^n+1)} \, dx = \int (\frac{1}{x} - \frac{x^n}{x(x^n+1)}) \, dx = \int (\frac{1}{x} - \frac{x^{n-1}}{x^n+1}) \, dx$
                    $= \ln|x| - \frac{1}{n} \int \frac{n x^{n-1}}{x^n+1} \, dx$
                    $= \ln|x| - \frac{1}{n} \ln|x^n+1| + C = \frac{1}{n} \ln\left|\frac{x^n}{x^n+1}\right| + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">36. $\int \frac{x^2}{(x \sin x + \cos x)^2} \, dx$</span>
                <p>
                    观察分母 $f(x) = x \sin x + \cos x$，$f'(x) = \sin x + x \cos x - \sin x = x \cos x$。
                    原积分 $= \int \frac{x}{\cos x} \cdot \frac{x \cos x}{(x \sin x + \cos x)^2} \, dx = \int (x \sec x) \cdot \frac{d}{dx}\left(-\frac{1}{x \sin x + \cos x}\right) \, dx$
                    分部积分：$u = x \sec x$，$dv = \frac{x \cos x}{(x \sin x + \cos x)^2} \, dx$。
                    $du = (\sec x + x \sec x \tan x) \, dx = \frac{1+x \tan x}{\cos x} \, dx = \frac{\cos x + x \sin x}{\cos^2 x} \, dx$
                    $v = -\frac{1}{x \sin x + \cos x}$
                    $I = - \frac{x \sec x}{x \sin x + \cos x} - \int (-\frac{1}{x \sin x + \cos x}) \cdot \frac{\cos x + x \sin x}{\cos^2 x} \, dx$
                    $I = - \frac{x}{x \sin x \cos x + \cos^2 x} + \int \frac{1}{\cos^2 x} \, dx$
                    $I = - \frac{x}{x \sin x \cos x + \cos^2 x} + \tan x + C$
                    $I = \frac{-x + \tan x (x \sin x \cos x + \cos^2 x)}{x \sin x \cos x + \cos^2 x} + C = \frac{-x + x \sin^2 x + \sin x \cos x}{x \sin x \cos x + \cos^2 x} + C$
                    化简：$= \frac{-x \cos^2 x + \sin x \cos x}{\cos x (x \sin x + \cos x)} + C = \frac{-x \cos x + \sin x}{x \sin x + \cos x} + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">37. $\int \tan^4 x \sec^3 x \, dx$</span>
                <p>
                    原积分 $= \int (\sec^2 x - 1)^2 \sec^3 x \, dx = \int (\sec^4 x - 2\sec^2 x + 1) \sec^3 x \, dx$
                    $= \int \sec^7 x \, dx - 2 \int \sec^5 x \, dx + \int \sec^3 x \, dx$
                    使用 $I_n = \int \sec^n x \, dx$ 的递推公式 (见第1题)。
                    $I_n = \frac{1}{n-1} \sec^{n-2} x \tan x + \frac{n-2}{n-1} I_{n-2}$
                    $I_7 = \frac{1}{6}\sec^5 x \tan x + \frac{5}{6}I_5$
                    $I_5 = \frac{1}{4}\sec^3 x \tan x + \frac{3}{4}I_3$
                    $I_3 = \frac{1}{2}\sec x \tan x + \frac{1}{2}I_1 = \frac{1}{2}\sec x \tan x + \frac{1}{2}\ln|\sec x + \tan x|$
                    原积分 $= (\frac{1}{6}\sec^5 x \tan x + \frac{5}{6}I_5) - 2I_5 + I_3 = \frac{1}{6}\sec^5 x \tan x - \frac{7}{6}I_5 + I_3$
                    $= \frac{1}{6}\sec^5 x \tan x - \frac{7}{6}(\frac{1}{4}\sec^3 x \tan x + \frac{3}{4}I_3) + I_3$
                    $= \frac{1}{6}\sec^5 x \tan x - \frac{7}{24}\sec^3 x \tan x - \frac{21}{24}I_3 + I_3$
                    $= \frac{1}{6}\sec^5 x \tan x - \frac{7}{24}\sec^3 x \tan x + \frac{3}{24}I_3$
                    $= \frac{1}{6}\sec^5 x \tan x - \frac{7}{24}\sec^3 x \tan x + \frac{1}{8} (\frac{1}{2}\sec x \tan x + \frac{1}{2}\ln|\sec x + \tan x|) + C$
                    $= \frac{1}{6}\sec^5 x \tan x - \frac{7}{24}\sec^3 x \tan x + \frac{1}{16}\sec x \tan x + \frac{1}{16}\ln|\sec x + \tan x| + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">38. $\int \frac{dx}{(1-x^2)\sqrt{1+x^2}}$</span>
                <p>
                    令 $x = \tan \theta$，$dx = \sec^2 \theta \, d\theta$。
                    原积分 $= \int \frac{\sec^2 \theta \, d\theta}{(1-\tan^2 \theta)\sqrt{1+\tan^2 \theta}} = \int \frac{\sec^2 \theta \, d\theta}{(1-\tan^2 \theta)\sec \theta} = \int \frac{\sec \theta \, d\theta}{1-\frac{\sin^2 \theta}{\cos^2 \theta}}$
                    $= \int \frac{\frac{1}{\cos \theta} \, d\theta}{\frac{\cos^2 \theta - \sin^2 \theta}{\cos^2 \theta}} = \int \frac{\cos \theta \, d\theta}{\cos(2\theta)}$
                    令 $u = \sqrt{2} \sin \theta$，$du = \sqrt{2} \cos \theta \, d\theta$。
                    $\cos(2\theta) = 1-2\sin^2 \theta = 1 - u^2$。
                    原积分 $= \int \frac{du/\sqrt{2}}{1-u^2} = \frac{1}{\sqrt{2}} \int \frac{du}{1-u^2} = \frac{1}{\sqrt{2}} \cdot \frac{1}{2} \ln\left|\frac{1+u}{1-u}\right| + C$
                    $= \frac{1}{2\sqrt{2}} \ln\left|\frac{1+\sqrt{2}\sin \theta}{1-\sqrt{2}\sin \theta}\right| + C$
                    $\sin \theta = \frac{x}{\sqrt{1+x^2}}$
                    $= \frac{1}{2\sqrt{2}} \ln\left|\frac{1+\sqrt{2}x/\sqrt{1+x^2}}{1-\sqrt{2}x/\sqrt{1+x^2}}\right| + C = \frac{1}{2\sqrt{2}} \ln\left|\frac{\sqrt{1+x^2}+\sqrt{2}x}{\sqrt{1+x^2}-\sqrt{2}x}\right| + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">39. $\int \sqrt{\tan x} \, dx$</span>
                <p>
                    令 $u = \sqrt{\tan x}$，$u^2 = \tan x$，$2u \, du = \sec^2 x \, dx = (1+\tan^2 x) \, dx = (1+u^4) \, dx$。
                    $dx = \frac{2u}{1+u^4} \, du$。
                    原积分 $= \int u \cdot \frac{2u}{1+u^4} \, du = \int \frac{2u^2}{u^4+1} \, du = \int \frac{(u^2+1) + (u^2-1)}{u^4+1} \, du$
                    $= \int \frac{u^2+1}{u^4+1} \, du + \int \frac{u^2-1}{u^4+1} \, du$
                    (同第7、8题) $= \int \frac{1+1/u^2}{u^2+1/u^2} \, du + \int \frac{1-1/u^2}{u^2+1/u^2} \, du$
                    第一个：令 $v = u-1/u$，$dv = (1+1/u^2)du$。$\int \frac{dv}{v^2+2} = \frac{1}{\sqrt{2}} \arctan(v/\sqrt{2})$
                    第二个：令 $w = u+1/u$，$dw = (1-1/u^2)du$。$\int \frac{dw}{w^2-2} = \frac{1}{2\sqrt{2}} \ln\left|\frac{w-\sqrt{2}}{w+\sqrt{2}}\right|$
                    总和：$\frac{1}{\sqrt{2}} \arctan\left(\frac{u-1/u}{\sqrt{2}}\right) + \frac{1}{2\sqrt{2}} \ln\left|\frac{u+1/u-\sqrt{2}}{u+1/u+\sqrt{2}}\right| + C$ (代回 $u=\sqrt{\tan x}$)
                    $= \frac{1}{\sqrt{2}} \arctan\left(\frac{\tan x - 1}{\sqrt{2 \tan x}}\right) + \frac{1}{2\sqrt{2}} \ln\left|\frac{\tan x - \sqrt{2 \tan x} + 1}{\tan x + \sqrt{2 \tan x} + 1}\right| + C$
                </p>
            </div>

            <div class="solution">
                <span class="solution-title">40. $\int \frac{dx}{\sin^4 x + \cos^4 x}$</span>
                <p>
                    $\sin^4 x + \cos^4 x = (\sin^2 x + \cos^2 x)^2 - 2\sin^2 x \cos^2 x = 1 - 2(\sin x \cos x)^2 = 1 - 2(\frac{1}{2}\sin 2x)^2 = 1 - \frac{1}{2}\sin^2(2x)$
                    原积分 $= \int \frac{dx}{1 - \frac{1}{2}\sin^2(2x)} = \int \frac{2 \, dx}{2 - \sin^2(2x)} = \int \frac{2 \, dx}{2 - (1-\cos^2(2x))} = \int \frac{2 \, dx}{1 + \cos^2(2x)}$
                    分子分母同除以 $\cos^2(2x)$：
                    $= \int \frac{2 \sec^2(2x) \, dx}{\sec^2(2x) + 1} = \int \frac{2 \sec^2(2x) \, dx}{(\tan^2(2x) + 1) + 1} = \int \frac{2 \sec^2(2x) \, dx}{\tan^2(2x) + 2}$
                    令 $u = \tan(2x)$，$du = 2 \sec^2(2x) \, dx$。
                    原积分 $= \int \frac{du}{u^2+2} = \frac{1}{\sqrt{2}} \arctan(u/\sqrt{2}) + C$
                    $= \frac{1}{\sqrt{2}} \arctan\left(\frac{\tan(2x)}{\sqrt{2}}\right) + C$
                </p>
            </div>

        </div>
    </div>

</body>
</html>